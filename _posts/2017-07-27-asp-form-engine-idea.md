---
layout: post
title:  "asp应用支撑平台-表单引擎思考"
date:   2017-07-27 23:25:09
categories: asp
excerpt:  asp应用支撑平台-表单引擎思考
---

* content
{:toc}

# 表单引擎思考

## 表单引擎应该具有的功能

### 表单实例管理

> 表单实例建立在模块实例下方，把一个用户打开的所有表单都缓存到用户id下，当用户再次打开或者操作这个表单时直接在缓存中获取。

#### 表单实例创建和销毁

> 表单实例的创建和销毁暂时先根据缓存的存在时间和缓存数量自动销毁。

#### 加载表单结构

> 表单实例创建后可以直接获取表单的结构。

#### 加载表单数据

> 根据传入的表单id可以根据数据表或者数据集获取表单数据。

#### 表单权限

> 表单结构权限随设计对象的权限来控制，单表单在文档内时还需要受文档内的权限控制。

> 表单数据权限一般是根据文档内的权限控制。

#### 表单事件

> 表单事件也是跟随设计对象的事件控制。

### 多表单事物控制

> 多表单事物联控指的是多个表单在一个父对象内时，提交父对象时需要对父对象内的所有表单数据保存做同步事物控制。

> 这种情况下需要考虑对表单实例数据保存需要根据它的父对象决定，比如表单在文档内，那么要么直接把表单放到文档实例内，要么表单实例知道自己属于哪个文档实例。

> 多表单事物本身不是指的是表单的事物，表单本身只是数据的中转站，它需要把数据交给数据表或数据集，那么所谓的表单事物其实指的是数据表或数据集的事物；也就是说多张表单数据提交事物统一控制，就是需要对多个数据表、数据集的事物同一控制。

### 表单实例存在的问题

> 